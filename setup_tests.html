<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>BioC++: Setting up library tests</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="biocpp.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="biocpp_logo.svg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">BioC++
   &#160;<span id="projectnumber">0.1.0</span>
   </div>
   <div id="projectbrief">The Modern C++ libraries for Bioinformatics.</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.svg"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('setup_tests.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Setting up library tests </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#autotoc_md72">Unit testing</a><ul><li class="level2"><a href="#autotoc_md73">Setting up unit tests</a></li>
</ul>
</li>
<li class="level1"><a href="#autotoc_md74">Other test suites</a></li>
<li class="level1"><a href="#autotoc_md75">Platform specific notes</a></li>
</ul>
</div>
<div class="textblock"><p><a class="anchor" id="md__home_hannes_devel_bio_core_doc_setup_library_tests_index"></a> <b>Learning Objective:</b><br  />
 In this guide you will learn to set up BioC++'s library tests to make sure that your contributions don't break anything.</p>
<table class="doxtable">
<tr>
<th>Difficulty</th><td>Easy</td></tr>
<tr>
<th>Duration</th><td>20 Minutes</td></tr>
<tr>
<th>Prerequisite tutorials</th><td><a class="el" href="core_setup.html">Quick Setup (using CMake)</a></td></tr>
<tr>
<th>Recommended reading</th><td></td></tr>
</table>
<h1><a class="anchor" id="autotoc_md72"></a>
Unit testing</h1>
<p>Unit tests are the most important tests, they should cover all functionality and all code-paths of the library. Before submitting a pull request to our repository, make sure that the unit tests pass on your system.</p>
<h2><a class="anchor" id="autotoc_md73"></a>
Setting up unit tests</h2>
<p>Assume that you have cloned BioC++ including submodules into <code>/home/me/devel/biocpp-core</code> and performed some local changes.</p>
<p>Create an out-of-source build directory and change to it:</p>
<div class="fragment"><div class="line">mkdir -p /home/me/devel/biocpp-core-build/debug</div>
<div class="line">cd /home/me/devel/biocpp-core-build/debug</div>
</div><!-- fragment --><p>Invoke CMake (this is often referred to as the "Configure" step):</p>
<div class="fragment"><div class="line">cmake ../../bio/test/unit -DCMAKE_BUILD_TYPE=Debug -DCMAKE_CXX_COMPILER=g++-10</div>
</div><!-- fragment --><p>The build type could be "Release", but stick to "Debug" for now. Specifying the compiler is optional; depending on your setup, you may need to give the full path.</p>
<h3>Building all unit tests</h3>
<p>Invoke Make (this is the actual build step):</p>
<div class="fragment"><div class="line">make</div>
</div><!-- fragment --><p>You may want to pass <code>-j x</code> where is <code>x</code> is the number of CPUs on your system to speed up the build. If you have build failures, it is recommend to run make again without <code>-j x</code> to receive better readable output.</p>
<p>After all test have been successfully built, run ctest to ensure correct results:</p>
<div class="fragment"><div class="line">ctest .</div>
</div><!-- fragment --><p>Fix any issues you encounter and re-run make and ctest. You only need to re-run cmake if you add or remove unit tests in between your changes.</p>
<h3>Building a specific unit test</h3>
<p>If you are working on a very specific piece of code, it might be beneficial to ensure that specific test builds and passes before re-building the entire set.</p>
<p>This builds the test for <a class="el" href="classbio_1_1dna4.html" title="The four letter DNA alphabet of A,C,G,T.">bio::dna4</a>:</p>
<div class="fragment"><div class="line">make dna4_test</div>
</div><!-- fragment --><p>And this runs the test:</p>
<div class="fragment"><div class="line">alphabet/nucleotide/dna4_test</div>
</div><!-- fragment --><p>Note that you need to give the (relative) path when running the executable, but not when building the test. Running the test executable individually will also tell you which parts of the test fail.</p>
<dl class="section attention"><dt>Attention</dt><dd>Before you (re-)submit changes in a pull-request, please build and run <b>all unit tests</b> as small changes can have unexpected side-effects.</dd></dl>
<h1><a class="anchor" id="autotoc_md74"></a>
Other test suites</h1>
<p>BioC++ has the following test suites:</p>
<ul>
<li>unit: tests the API of the library</li>
<li>documentation: tests that everything is properly documented</li>
<li>snippet: tests the buildability of code snippets inside the documentation</li>
<li>header: tests that every header includes all required headers and detects linkage issues</li>
<li>performance: contains microbenchmarks</li>
</ul>
<p>If your unit tests pass and you submit a pull request, our continuous integration builds also run the other test suites. You might encounter failures in one of them in which case you need to also setup that test suite to fix your problems before you re-submit/update your pull request.</p>
<p>The only difference in setting up the other test suites is a different path when invoking CMake. Since you used out-of-source builds, you can simply create another directory for the other test suite(s).</p>
<p>This will setup snippet tests:</p>
<div class="fragment"><div class="line">mkdir -p /home/me/devel/biocpp-core-build/snippet</div>
<div class="line">cd /home/me/devel/biocpp-core-build/snippet</div>
<div class="line"> </div>
<div class="line">cmake ../../bio/test/snippet -DCMAKE_BUILD_TYPE=Debug -DCMAKE_CXX_COMPILER=g++-10</div>
<div class="line"> </div>
<div class="line">make -j 4</div>
<div class="line"> </div>
<div class="line">ctest .</div>
</div><!-- fragment --><p>Documentation tests do not require setting a build type or compiler, but they require that doxygen be installed on the system. Locally built documentation will be placed into <code>/home/me/devel/biocpp-core-build/documentation/doc_usr/html/</code>.</p>
<h1><a class="anchor" id="autotoc_md75"></a>
Platform specific notes</h1>
<ul>
<li>On *BSD operating systems (but not macOS), call <code>gmake</code> whenever you would call <code>make</code>. </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.16-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <div id="list_bottom_right" style="text-align:right; float:left; color:black; padding: 0px 0px 0px 10px"></div>
    <script type="text/javascript" charset="utf-8" src="version.js"></script>
    <li class="footer">Generated on Sun Jun 12 2022 17:23:28 for BioC++ by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
